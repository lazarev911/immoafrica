"use strict";!function(t){t.Scroller={viewPortHeight:0,rTimer:!1,selector:!1,data:{},scroller:{},container:{},bar:{},barTop:0,scrollerY0:0,drag:!1,_initData:function(i){return t.extend({barOnCls:"",barMinHeight:20,barWidth:10,barPadding:10,barTop:0,barColor:"#999999",scroller:"scroller",wrap:"scroller-wrapp",container:"scroller-container",bar:"scroller-bar",webkitFix:!1},i)},_barOn:function(i){i?t(this.bar).addClass(this.data.barOnCls):t(this.bar).removeClass(this.data.barOnCls)},_posBar:function(i,r){var e=this.data.barMinHeight;t(this.bar).css("top",i+"px"),void 0!==r&&(r>0&&e>r&&(r=e),t(this.bar).css({height:r+"px"}))},_k:function(){return this.scroller.clientHeight-this.bar.offsetHeight-this.data.barTop},_relToTop:function(t){return t*this._k()+this.data.barTop},_topToRel:function(t){return t-this.data.barTop/this._k()},_dontStartSelect:function(){return!1},_selection:function(t){this._event(document,"selectstart",this._dontStartSelect,t?"off":"")},_viewport:function(){this.viewPortHeight=this.scroller.clientHeight},_event:function(i,r,e,s){t(i)[s||"on"](r,e)},_updateScrollBar:function(){var t,i,r,e;t=-(this.scroller.pageYOffset||this.scroller.scrollTop),r=0!=this.container.offsetHeight?this.scroller.clientHeight*this.scroller.clientHeight/this.container.offsetHeight:0,e=this.container.offsetHeight-this.scroller.clientHeight,this.barTop=0!=e?this._relToTop(-t/e):0,this.scroller.clientHeight>=this.container.offsetHeight&&(r=0),i!==r?(this._posBar(this.barTop,r),i=r):this._posBar(this.barTop)}},t.Scroller.init=function(i,r){this.data=this._initData(r);var e=this,s=t(i).addClass(this.data.container);return s.wrap("<div class='"+this.data.wrap+"'><div class='"+this.data.scroller+"'></div></div>"),s.parent().append("<div class='"+this.data.bar+"'></div>"),this.container=t(s,i)[0],this.selector=t(s.parent().parent(),i)[0],this.scroller=t(s.parent(),i)[0],this.bar=t(t("."+this.data.bar),i)[0],t("."+this.data.wrap).css({position:"relative",overflow:"hidden"}),t("."+this.data.scroller).css({"overflow-y":"scroll"}),t("."+this.data.container).css({overflow:"hidden","padding-right":this.data.barWidth+this.data.barPadding+"px"}),t("."+this.data.bar).css({position:"absolute","z-index":1,right:0,width:this.data.barWidth+"px",background:this.data.barColor,opacity:.5}),this.data.webkitFix&&t("body").append("<style>.scroller::-webkit-scrollbar { width:0; }</style>"),this._barOn(this.scroller.clientHeight<this.container.offsetHeight),t(this.scroller).css("width",this.selector.clientWidth+this.scroller.offsetWidth-this.scroller.clientWidth+"px"),this._viewport(),this._event(this.scroller,"scroll",function(){e._updateScrollBar()}),this._event(window,"resize",function(){clearTimeout(this.rTimer),this.rTimer=setTimeout(function(){e._viewport(),e._updateScrollBar(),e._barOn(e.container.offsetHeight>e.scroller.clientHeight)},200)}),this._event(this.bar,"mousedown",function(i){i.preventDefault(),t.Scroller._selection(),this.drag=!0}),this._event(document,"mouseup blur",function(){t.Scroller._selection(1),this.drag=!1}),this._event(document,"mousemove",function(t){this.drag&&(this.scroller.scrollTop=this._topToRel(t.clientY-this.scrollerY0)*(this.container.offsetHeight-this.scroller.clientHeight))}),this._event(document,"mousedown",function(t){this.scrollerY0=t.clientY-this.barTop}),this._updateScrollBar(),this}}(jQuery);